<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="renderer" content="webkit">
	<meta name="format-detection" content="telephone=no, email=no">
	<meta name="x5-orientation" content="portrait">
	<meta name="screen-orientation" content="portrait">
	<meta name="author" content="rhine@rhine.me">
	<title>Example of inputImage.js</title>
	<style>
		body {
			text-align: center;
		}

		.container {
			flex: 1;
			margin: 5px;
		}
	</style>
</head>
<body>
<p>
	<button id="upload">Take A Photo</button>
</p>

<div style="display: flex;">
	<div class="container">
		original &lt;img&gt;:<br>
		<img id="original_image" style="max-width: 100%">
	</div>
	<div class="container">
		draw to &lt;canvas&gt;:<br>
		<canvas id="original_canvas" style="max-width: 100%"></canvas>
	</div>
</div>

<div style="display: flex;">
	<div class="container">
		adjusted &lt;img&gt;:<br>
		<img id="adjust_image" style="max-width: 100%">
	</div>
	<div class="container">
		adjusted &lt;canvas&gt;:<br>
		<canvas id="adjust_canvas" style="max-width: 100%"></canvas>
	</div>
</div>

<script src="./js/exif.js"></script>
<script src="./js/inputImage.js"></script>
<script>
	upload.addEventListener('click', function () {
		inputImage.input({
			camera: true,
			format: 'image',
			success: function (files) {
				original_image.src = files[0].src;
				drawCanvas(original_canvas, files[0]);

				inputImage.adjust({
					image: files[0],
					max: 750,
					success: function (base64, width, height) {
						adjust_image.src = base64;
						var img = new Image();
						img.onload = function () {
							drawCanvas(adjust_canvas, img);
						};
						img.src = base64;
					}
				});
			}
		});
	});

	function drawCanvas(canvas, img) {
		var context = canvas.getContext('2d');
		canvas.width = img.width;
		canvas.height = img.height;
		context.drawImage(img, 0, 0);
	}
</script>

</body>
</html>