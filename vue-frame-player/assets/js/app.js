(function(e){function t(t){for(var s,n,o=t[0],c=t[1],l=t[2],u=0,f=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&f.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);p&&p(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(r.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},i={app:0},r=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var p=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1110:function(e,t,a){},"1bf1":function(e,t,a){"use strict";a("c7af")},5016:function(e,t,a){"use strict";a("1110")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],n=(a("5c0b"),a("2877")),o={},c=Object(n["a"])(o,i,r,!1,null,null,null),l=c.exports,p=a("8c4f"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"box"},[a("frame-player",{ref:"theFramePlayer",attrs:{config:{imageMode:"visible",playMode:"loop",length:150,initialImages:"https://vmllab-js.github.io/vFramePlayer/image/[frame].jpg",playStep:1,playSpeed:1,autoplay:!0,preload:!0}}}),a("div",{staticClass:"info"},[a("div",{staticClass:"fps"},[e._v("FPS："+e._s(e.player.fps))]),a("div",{staticClass:"current"},[e._v("当前帧："+e._s(e.player.currentFrame))]),a("div",{staticClass:"direction"},[e._v("方向："+e._s(e.player.playDirection>0?"正向":"反向"))]),a("div",{staticClass:"direction"},[e._v("速度："+e._s(e.player.playSpeed)+"X")])]),a("div",{staticClass:"controls"},[a("div",{staticClass:"process-ctnr"},[a("div",{staticClass:"process",style:{width:e.player.currentFrame/e.player.frameLength*100+"%"}})]),a("i",{staticClass:"fa fa-play",on:{click:e.play}}),a("i",{staticClass:"fa fa-pause",on:{click:e.pause}}),a("i",{staticClass:"fa fa-backward",on:{click:function(t){return e.setPlaySpeed(-3)}}}),a("i",{staticClass:"fa fa-stop",on:{click:e.stop}}),a("i",{staticClass:"fa fa-forward",on:{click:function(t){return e.setPlaySpeed(3)}}}),a("i",{staticClass:"fa fa-repeat",on:{click:e.replay}}),a("i",{staticClass:"fa fa-play",on:{click:function(t){return e.goto(20)}}},[e._v(" 20")])])],1),a("div",{staticClass:"config"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"label"},[e._v("playMode:")]),a("div",{staticClass:"content"},e._l(e.playModes,(function(t){return a("div",{staticClass:"btn playMode",class:{unactive:e.player.playMode!==t},on:{click:function(a){return e.setPlayMode(t)}}},[e._v(" "+e._s(t)+" ")])})),0)]),a("div",{staticClass:"flex"},[a("div",{staticClass:"label"},[e._v("imageMode:")]),a("div",{staticClass:"content"},e._l(e.imageModes,(function(t){return a("div",{staticClass:"btn imageMode",class:{unactive:e.player.imageMode!==t},on:{click:function(a){return e.setImageMode(t)}}},[e._v(" "+e._s(t)+" ")])})),0)]),a("div",{staticClass:"flex"},[a("div",{staticClass:"label"},[e._v("fps: "+e._s(e.player.fps))]),a("div",{staticClass:"content"},[a("div",{staticClass:"btn fps",on:{click:function(t){return e.setFPS(e.player.fps-5)}}},[e._v("-5")]),a("div",{staticClass:"btn fps",on:{click:function(t){return e.setFPS(e.player.fps+5)}}},[e._v("+5")])]),a("div",{staticClass:"label"},[e._v("playStep: "+e._s(e.player.playStep))]),a("div",{staticClass:"content"},[a("div",{staticClass:"btn play-step",on:{click:function(t){return e.setPlayStep(e.player.playStep-1)}}},[e._v("-1")]),a("div",{staticClass:"btn play-step",on:{click:function(t){return e.setPlayStep(e.player.playStep+1)}}},[e._v("+1")])])]),a("div",{staticClass:"flex"})])])},f=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"frame-player"},["unique"===e.imageMode?a("div",{staticClass:"frame-ctnr mode-unique"},[a("img",{staticClass:"frame-image",attrs:{src:e.frameImages[e.currentFrame]}})]):"visible"===e.imageMode?a("div",{staticClass:"frame-ctnr mode-visible"},e._l(e.frameImages,(function(t,s){return a("img",{staticClass:"frame-image",class:{"current-frame":e.currentFrame===s},attrs:{src:t}})})),0):"opacity"===e.imageMode?a("div",{staticClass:"frame-ctnr mode-opacity"},e._l(e.frameImages,(function(t,s){return a("img",{staticClass:"frame-image",class:{"current-frame":e.currentFrame===s},attrs:{src:t}})})),0):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"canvas"===e.imageMode,expression:"imageMode === 'canvas'"}],staticClass:"frame-ctnr mode-canvas"},[a("canvas",{ref:"canvas",staticClass:"frame-canvas"})])])},d=[],m=a("2909"),y=(a("ac1f"),a("5319"),a("d3b7"),a("4de4"),a("159b"),{name:"FramePlayer",props:{config:Object},data:function(){return{imageMode:"visible",playMode:"normal",frameImages:[],currentFrame:0,frameLength:0,fps:25,paused:!0,playStep:1,playSpeed:1,playDirection:1,events:{}}},mounted:function(){var e=this;console.log("config",this.config),this.set(this.config);var t=this.config,a=t.initialImages,s=t.length,i=[];if("function"===typeof a)for(var r=0;r<s;++r)i.push(a(r,s));else if("string"===typeof a)for(var n=0;n<s;++n)i.push(a.replace("[frame]",n+1));else i=Object(m["a"])(a);this.frameImages=i,this.frameLength=i.length,this.__timer(),this.config.preload?this.__preload().then((function(){e.config.autoplay&&e.play(),e.trigger("loaded",{from:"preload"})})):this.config.autoplay&&this.play()},destroyed:function(){window.cancelAnimationFrame(this._timer),this.off()},methods:{set:function(e){return e.fps>0&&(this.fps=e.fps),e.playStep>0&&(this.playStep=e.playStep),e.playSpeed&&(this.playSpeed=e.playSpeed),e.playMode&&(this.playMode=e.playMode,this.playDirection=1),e.imageMode&&(this.imageMode=e.imageMode),this},__timer:function(){if(this._timer=window.requestAnimationFrame(this.__timer),!this.paused){var e=Date.now();if(this._lastFrameTime){var t=1e3/this.fps*this.playStep/Math.abs(this.playSpeed);if(!(e-this._lastFrameTime<t)){this._lastFrameTime+=t,e-this._lastFrameTime>t&&(this._lastFrameTime=e);var a=this.currentFrame+this.playStep*this.playDirection*this.playSpeed/Math.abs(this.playSpeed);if(a>=this.frameLength)switch(this.playMode){case"normal":this.paused=!0,this.trigger("pause",{from:"ended",current:this.currentFrame}),this.trigger("ended",{from:"ended",current:this.currentFrame});break;case"loop":this.currentFrame=0,this.trigger("loop",{from:"loop",current:this.currentFrame});break;case"yoyo":this.playDirection*=-1,this.trigger("yoyo",{from:"yoyo",current:this.currentFrame});break}else if(a<0)switch(this.playMode){case"normal":case"loop":this.paused=!0,this.trigger("pause",{from:"ended",current:this.currentFrame});break;case"yoyo":this.playDirection*=-1,this.trigger("yoyo",{from:"yoyo",current:this.currentFrame});break}else this.currentFrame=a;"canvas"===this.imageMode&&this.__updateCanvas(),this.trigger("update",{from:"update",current:this.currentFrame})}}else this._lastFrameTime=e}},__updateCanvas:function(){var e=this.$refs.canvas,t=e.getContext("2d"),a=new Image;a.onload=function(){e.width!==a.width&&(e.width=a.width),e.height!==a.height&&(e.height=a.height),t.clearRect(0,0,e.width,e.height),t.drawImage(a,0,0)},a.src=this.frameImages[this.currentFrame]},__preload:function(){var e=this;return new Promise((function(t,a){var s=0,i=function i(){var r=new Image;r.onload=function(){++s<e.frameImages.length?i():t()},r.onerror=a,r.src=e.frameImages[s]};i()}))},play:function(){return this.paused=!1,this.trigger("play",{from:"play",current:this.currentFrame}),this},pause:function(){return this.paused=!0,this.trigger("pause",{from:"pause",current:this.currentFrame}),this},toggle:function(){return this.paused=!this.paused,this.trigger(this.paused?"pause":"play",{from:"toggle",current:this.currentFrame}),this},stop:function(){return this.goto(0),this.paused=!0,this.trigger("pause",{from:"stop",current:this.currentFrame}),this},replay:function(){return this.goto(0),this.paused=!1,this.trigger("play",{from:"replay",current:this.currentFrame}),this},goto:function(e){return this.currentFrame=e,"canvas"===this.imageMode&&this.__updateCanvas(),this.trigger("goto",{from:"goto",current:this.currentFrame}),this},on:function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this},off:function(e,t){return e?t?this.events[e]&&(this.events[e]=this.events[e].filter((function(e){return e!==t}))):this.events[e]=[]:this.events={},this},trigger:function(e,t){return this.events[e]&&this.events[e].forEach((function(e){return e(t)})),this}}}),g=y,v=(a("8ec7"),Object(n["a"])(g,h,d,!1,null,"4778d68d",null)),_=v.exports,b={name:"Home",components:{FramePlayer:_},data:function(){return{imageModes:["unique","visible","opacity","canvas"],playModes:["normal","loop","yoyo"],player:{}}},mounted:function(){var e=this.$refs.theFramePlayer;this.player=e,e.on("play",(function(){console.log("on play")})).on("pause",(function(){console.log("on pause")})).on("ended",(function(){console.log("on ended")})).on("loop",(function(){console.log("on loop")})).on("yoyo",(function(){console.log("on yoyo")})).on("update",(function(e){console.log("on update",e)}))},methods:{setFPS:function(e){this.player.set({fps:e})},setPlayStep:function(e){this.player.set({playStep:e})},setPlaySpeed:function(e){this.player.set({playSpeed:e}).play()},play:function(){this.player.set({playSpeed:1}).play()},pause:function(){this.player.pause()},stop:function(){this.player.stop()},replay:function(){this.player.set({playSpeed:1}).replay()},goto:function(e){this.player.set({playSpeed:1}).goto(e).play()},setPlayMode:function(e){this.player.set({playMode:e})},setImageMode:function(e){this.player.set({imageMode:e})}}},C=b,F=(a("5016"),a("1bf1"),Object(n["a"])(C,u,f,!1,null,"fd4c3092",null)),M=F.exports;s["a"].use(p["a"]);var S=[{path:"/",name:"Home",component:M}],w=new p["a"]({routes:S}),P=w;a("499a");s["a"].config.productionTip=!1,new s["a"]({router:P,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"8ec7":function(e,t,a){"use strict";a("aa83")},"9c0c":function(e,t,a){},aa83:function(e,t,a){},c7af:function(e,t,a){}});
//# sourceMappingURL=app.js.map